\ ------------------------------------------------------------------------------
\ Dark Blue
\ ------------------------------------------------------------------------------
 
\ Constants
460 constant gamew
345 constant gameh
8192 constant #actors
#actors constant #temps

gamew to appw
gameh to apph
gamew >. constant gamew.
gameh >. constant gameh.
gamew s>f fconstant f-gamew
gameh s>f fconstant f-gameh

\ Load engine
include %vfxland5%\supershow\supershow.vfx
include %vfxland5%\spunk\spunk.vfx

\ load game-specific modules (dependencies)
require common.vfx
require event.vfx
require darkblue-math.vfx
require starfield.vfx
require laser.vfx
require path.vfx
require enemies.vfx

\ Load the automated script and asset loads (if i'm keeping any of it).
\ This includes all scripts in modes\.
load-project

redef : main
    title ;

debug @ [if]

    \ Custom overlay for Sketchpad
    \ Show tags and calltimes

    sketchpad/ definitions
    variable overlay  2 overlay !

    \ : ?cycle-overlaymode ( - )
    \     <tab> pressed? -exit   overlaymode @ 1 + 3 mod overlaymode ! ;

    : tags  1 overlay ! ;
    : calltimes  2 overlay ! ;
    : tag:  0 parse tag$ place ;

    : darkblue-sketchpad-overlay 
        actives>
            x 2@ 2.> at
            overlay @ 1 = if tag$ count print then
            overlay @ 2 = if calltime @ ?dup if f" %p" print then then
            \ ?cycle-overlaymode
    ;

    ['] darkblue-sketchpad-overlay is sketchpad-overlay

[then]